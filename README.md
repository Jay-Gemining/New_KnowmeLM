# KnowmeLM

## 概述

KnowmeLM 是一款功能强大的知识管理应用程序，旨在帮助用户组织、总结和互动来自各种来源的信息。它允许用户创建笔记本，从 YouTube 视频和基于文本的文件（TXT、PDF、MD）添加内容，生成由人工智能驱动的摘要，并根据摘要内容进行交互式聊天会话。此外，用户可以从其处理过的信息生成 HTML 报告。

## 主要功能

-   **笔记本管理**：创建和选择笔记本以组织您的知识领域。
-   **来源管理**：
    -   通过提供 YouTube 视频的 URL 添加视频。
    -   上传文本文档，包括 TXT、PDF 和 Markdown (MD) 格式。
-   **人工智能驱动的摘要**：使用先进的人工智能模型自动生成您添加来源的简洁摘要。
-   **交互式人工智能聊天**：与一个使用您选定来源摘要作为其知识库的人工智能进行对话。这有助于针对性地检索信息并更深入地理解您的内容。
-   **HTML 报告生成**：从您的来源摘要创建结构良好的 HTML 报告，非常适合共享或存档。

## 使用的技术

-   **后端**：
    -   Python (Flask)
    -   OpenAI API
    -   `yt-dlp`（用于下载 YouTube 视频信息）
    -   `PyPDF2`（用于处理 PDF 文件）
-   **前端**：
    -   React
    -   JavaScript
-   **数据存储**：
    -   使用浏览器 `localStorage` 缓存笔记本和生成的报告，以增强性能和用户体验。

## 前端设计与用户界面 (Frontend Design and User Interface)

KnowmeLM 的前端采用 React 构建，旨在提供一个直观、高效的用户体验。应用程序的整体布局遵循现代设计原则，主要采用双栏结构：

*   **左侧边栏 (Sidebar):** 作为主要的导航中心，用户可以在此管理笔记本和访问其中的内容来源。
*   **右侧主内容区 (Main Content Area):** 这是用户与选定内容进行深度交互的核心区域，其显示内容会根据用户的选择动态变化。

这种布局旨在将导航与内容操作清晰分离，使用户能够轻松定位信息并专注于当前任务。

### 主要 UI 组件及其职责

应用程序的界面由多个关键组件构成，它们协同工作以提供流畅的用户体验：

*   **`App.js` (应用外壳):** 作为整个前端应用的根组件，负责编排整体布局（侧边栏和主内容区），管理全局状态（如笔记本列表、当前选中的笔记本和内容来源），并处理核心的导航逻辑。

*   **`Sidebar.js` (侧边栏):**
    *   **笔记本管理:** 用户可以通过侧边栏创建新的笔记本，输入笔记本标题。已创建的笔记本会在此列出，用户可以轻松选择、编辑标题或删除笔记本。
    *   **内容来源列表:** 当用户选定一个笔记本后，该笔记本下的所有内容来源（如 YouTube 视频摘要、文本文件摘要）会清晰地展示在侧边栏。不同类型的内容来源会以直观的图标（例如 📺 代表 YouTube，📰 代表 PDF，📄 代表其他文本文件）加以区分，方便用户快速识别。
    *   **来源选择:** 用户可以点击列表中的任一内容来源，以便在主内容区查看其详细信息或进行相关操作。

*   **`MainContent.js` (主内容区):** 这是用户与数据交互的核心区域，其展示内容高度动态化，具体取决于用户的选择：
    *   **欢迎界面:** 当应用启动且未选择任何笔记本时，主内容区会显示欢迎信息，引导用户开始操作。
    *   **笔记本概览 (Notebook Overview):** 当用户选择了某个笔记本但尚未选择具体的内容来源时，此视图会激活。它会显示当前笔记本的标题，并提供便捷的按钮（“➕ 添加 YouTube 来源”，“➕ 添加文件来源”）允许用户直接在此区域嵌入 `YoutubeSummarizer` 或 `TextFileSummarizer` 组件来添加新的知识源。此外，此视图还会列出当前笔记本中的所有来源，并提供复选框，供用户选择特定的来源以用于后续的聊天上下文或生成报告。用户也可以在此处启动“生成 HTML 报告”的功能。
    *   **内容来源详情 (Source Detail View):** 当用户从侧边栏选择一个具体的内容来源后，主内容区会切换到此视图。它通常会展示该来源的名称、类型、添加日期等元数据，并可能包含一个标签页界面：
        *   **“摘要 (Summary)”标签页:** 显示由 AI 生成的内容摘要。
        *   **“原始内容 (Original Content)”标签页:** 提供访问原始内容（如视频字幕文本）的途径。
        *   **“与此来源聊天 (Chat with this Source)”标签页:** 将下方的聊天界面配置为主要使用当前选定来源的上下文进行对话。

*   **聊天界面 (Chat Interface):** 通常位于 `MainContent` 区域的下半部分（当笔记本被选定时）。这是一个持久化的交互区域：
    *   清晰地展示用户与 AI 之间的对话历史。
    *   提供一个文本输入区域供用户键入消息。
    *   根据当前用户的选择（是整个笔记本、特定来源组合还是单个来源），显示相应的上下文信息（例如，“正在与 [来源名称] 聊天”或“上下文：X 个选定来源”）。
    *   负责将用户消息发送到后端，并实时显示 AI 的回复。

*   **`Notification.js` (通知系统):** 应用通过一个通知组件（通常显示在界面的特定角落）向用户提供非阻塞性的反馈信息，例如操作成功（如“来源添加成功！”）、错误提示或状态更新（如“AI 正在思考...”）。

*   **嵌入式内容添加工具:**
    *   **`YoutubeSummarizer.js` 和 `TextFileSummarizer.js`:** 这些组件作为工具嵌入到 `MainContent` 的“笔记本概览”视图中，分别负责处理 YouTube 链接的提交和文本文件的上传，从而捕获信息并触发后续的摘要流程。

这种组件化的设计不仅使得代码更易于管理和维护，也确保了用户在与 KnowmeLM 交互时，每一步操作都有清晰的界面反馈和高效的功能支持。

### 典型用户交互流程

以下是一些用户在使用 KnowmeLM 时典型的操作路径：

1.  **创建新笔记本:**
    *   用户在 `Sidebar`（侧边栏）点击“创建新笔记本”按钮。
    *   在弹出的对话框中输入笔记本的标题，确认后新的笔记本将出现在侧边栏列表中，并自动被选中。
    *   `MainContent`（主内容区）会切换到该新笔记本的“笔记本概览”视图。

2.  **添加内容来源:**
    *   **添加 YouTube 视频:**
        *   在选定笔记本的“笔记本概览”视图中，点击“➕ 添加 YouTube 来源”按钮。
        *   `YoutubeSummarizer` 组件会显示在主内容区。
        *   用户粘贴 YouTube 视频 URL 并提交。
        *   处理完成后，新的 YouTube 来源（包含其摘要）会出现在侧边栏的来源列表中，并在主内容区的来源列表中更新。
    *   **添加文本文件 (TXT, PDF, MD):**
        *   在选定笔记本的“笔记本概览”视图中，点击“➕ 添加文件来源”按钮。
        *   `TextFileSummarizer` 组件会显示在主内容区。
        *   用户选择本地的文本文件并上传。
        *   处理完成后，新的文件来源（包含其摘要）会出现在侧边栏的来源列表中，并在主内容区的来源列表中更新。

3.  **查看与管理内容来源:**
    *   用户在 `Sidebar` 中点击一个笔记本，该笔记本下的来源列表会展示出来。
    *   点击列表中的某个特定来源，`MainContent` 会切换到“内容来源详情”视图。
    *   用户可以在此视图中通过标签页查看来源的“摘要”、“原始内容”（如果适用）。

4.  **与 AI 聊天互动:**
    *   **基于整个笔记本或选定来源组合:**
        *   在 `MainContent` 的“笔记本概览”视图中，用户可以通过复选框选择一个或多个来源。
        *   在下方的聊天界面中输入问题。AI 将基于所选来源的摘要进行回答。如果未选择特定来源，AI 可能基于笔记本中所有来源进行回答或进行通用聊天。
    *   **基于单个特定来源:**
        *   在“内容来源详情”视图中，切换到“与此来源聊天”标签页。
        *   聊天界面会自动配置为主要使用当前来源的上下文。用户输入问题，AI 将针对性地回答。
    *   聊天记录会实时显示，用户可以持续提问和互动。

5.  **生成 HTML 报告:**
    *   在 `MainContent` 的“笔记本概览”视图中，用户通过复选框勾选希望包含在报告中的一个或多个内容来源。
    *   点击“生成 HTML 报告(所选)”按钮。
    *   系统会为每个选定的来源摘要生成一个 HTML 文件，并在新的浏览器标签页中打开（如果浏览器设置允许）。用户可以查看、保存或分享这些报告。
    *   `Notification` 系统可能会提示报告生成的进度或结果。

通过这些流程，用户可以高效地利用 KnowmeLM 组织知识、提取洞见并进行智能交互。

### UI/UX 设计原则

KnowmeLM 的用户界面设计遵循了若干核心原则，以确保应用的易用性和效率：

*   **清晰直观 (Clarity and Ease of Use):** 界面元素和操作流程力求简洁明了。例如，通过侧边栏清晰区分笔记本和内容来源，使用图标快速传达信息，使得用户无需复杂学习即可上手。
*   **上下文感知 (Contextual Information):** 应用在关键交互点（如聊天界面）会明确提示当前的上下文（例如，是与整个笔记本聊天还是与特定来源聊天），帮助用户理解 AI 的回应范围，避免混淆。
*   **直接操作与流畅工作流 (Direct Manipulation and Smooth Workflows):** 用户可以直接在主内容区内完成核心任务，如在笔记本概览中直接添加新来源，而无需跳转到独立的页面。这使得工作流程更加连贯和高效。
*   **及时的用户反馈 (Timely User Feedback):** 通过 `Notification` 系统和界面内的状态提示（如“AI 正在思考...”、“报告生成中...”），应用会及时向用户反馈操作的进展和结果，增强了用户的控制感和应用的透明度。
*   **渐进式 раскрытие (Progressive Disclosure):** 信息和功能在需要时才展现。例如，只有当用户选择了一个笔记本后，相关的来源管理和添加选项才会变得突出，避免了初期界面的信息过载。

这些原则共同作用，旨在为用户提供一个既强大又易于导航的知识管理环境。

*为了更直观地理解 KnowmeLM 的用户界面和交互体验，建议配合实际应用截图或操作演示视频进行查阅（若有提供）。*

## 安装与设置

### 后端

1.  **Python**：确保您已安装 Python 3.x。
2.  **依赖项**：使用 `requirements.txt` 安装所需的 Python 包：
    ```bash
    pip install -r requirements.txt
    ```
3.  **环境配置**：
    -   在后端目录中通过复制示例文件创建一个 `.env` 文件：
        ```bash
        cp .env.example .env
        ```
    -   编辑 `.env` 文件以包含您的 OpenAI API 密钥和任何其他必要的配置：
        ```
        OPENAI_API_KEY='your_openai_api_key_here'
        # 其他后端特定的环境变量
        ```
4.  **运行 Flask 服务器**：
    ```bash
    python app.py # 或您的主 Flask 应用程序文件
    ```
    后端服务器通常会在 `http://localhost:5000` 上运行。

### 前端

1.  **Node.js 和 npm**：确保您已安装 Node.js（包含 npm）。
2.  **依赖项**：导航到前端目录并使用 `package.json` 安装所需的 Node.js 包：
    ```bash
    npm install
    ```
3.  **运行 React 开发服务器**：
    ```bash
    npm start
    ```
    前端应用程序通常可在 `http://localhost:3000` 访问。

## 使用说明

本应用程序的核心功能包括笔记本管理、多样化的内容来源添加（YouTube 视频、文本文件）、AI 驱动的内容摘要、基于摘要的交互式 AI 聊天以及 HTML 报告的生成。

关于如何通过用户界面操作这些功能的详细步骤和典型用户交互流程，请参阅上一章节 “**前端设计与用户界面**” 中的 “典型用户交互流程” 小节。该章节详细介绍了如何创建和管理笔记本、添加和处理内容来源、与聊天机器人互动以及生成报告等。

## 后端 API 端点

后端提供以下 API 端点：

-   `POST /summarize-youtube`：接受 YouTube 视频 URL，处理视频内容（例如，字幕），并返回人工智能生成的摘要。
-   `POST /summarize-text-file`：接受上传的基于文本的文件（TXT、PDF、MD），提取其内容，并返回人工智能生成的摘要。
-   `POST /chat`：接受用户查询和选定来源摘要列表。根据提供的上下文返回人工智能生成的响应。
-   `POST /generate-html-report`：接受来源摘要列表并生成整合的 HTML 报告。

## 免责声明

KnowmeLM 目前正处于开发阶段。产品需求文档（PRD）中描述的或最终产品设想的某些功能可能尚未完全实现，或者其当前实现可能有所不同。在我们继续改进应用程序的过程中，感谢您的理解和反馈。